<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Control de Línea de Producción</title>
<script>
  (function () {
    var KEY  = 'gate_ok_v1';
    var PASS = 'chespirito'; // <-- tu clave

    // Si ya validaste en esta pestaña, seguí
    if (sessionStorage.getItem(KEY) === '1') return;

    // Pedir clave al cargar
    var v = '';
    try { v = (prompt('Ingrese la contraseña para acceder:') || '').normalize('NFKC').trim(); } catch (e) {}

    if (v && v.toLowerCase() === PASS.toLowerCase()) {
      sessionStorage.setItem(KEY, '1');
      return; // deja cargar la app
    }

    // Denegado / bloqueado: pantalla simple con Reintentar
    document.open();
    document.write(
      '<!doctype html><meta charset="utf-8"><title>Acceso denegado</title>' +
      '<div style="min-height:100vh;display:flex;align-items:center;justify-content:center;background:#0b0d10;color:#fff;font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;">' +
        '<div style="text-align:center">' +
          '<h2 style="margin:0 0 8px;">Acceso denegado</h2>' +
          '<p style="opacity:.85;margin:0 0 12px;">Toque "Reintentar" para ingresar la contraseña.</p>' +
          '<button id="retry" style="padding:10px 16px;border:0;border-radius:999px;background:#22c55e;color:#0b0d10;font-weight:600;cursor:pointer;">Reintentar</button>' +
        '</div>' +
      '</div>' +
      '<script>document.getElementById("retry").addEventListener("click", function(){ location.reload(); });<\/script>'
    );
    document.close();
  })();
  </script>
  <link rel="manifest" href="./manifest.json">
  <meta name="theme-color" content="#FE001A">
  <link rel="icon" href="./icon-192.png">
  <link rel="stylesheet" href="estilos.css">
</head>

<body>

  <h1>Estado de Línea de Producción</h1>
  <div id="maquinasContainer"></div>

  <!-- Modal de Confirmación -->
  <div id="modalConfirmacion" style="display: none; position: fixed; inset: 0; background-color: rgba(0,0,0,0.6); z-index: 9999; align-items: center; justify-content: center;">
    <div style="background: white; padding: 20px; border-radius: 10px; text-align: center; max-width: 300px;">
      <p id="mensajeConfirmacion" style="margin-bottom: 20px;">¿Estás seguro?</p>
      <button id="btnSi" style="margin-right: 10px; background: #d33; color: white; padding: 8px 16px; border: none; border-radius: 4px;">Sí</button>
      <button id="btnNo" style="background: #ccc; padding: 8px 16px; border: none; border-radius: 4px;">No</button>
    </div>
  </div>

  <!-- JavaScript principal -->
  <script type="module" src="./app.js?v=2025-08-10-11"></script>



  <!-- Registro del Service Worker -->
  <script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('./service-worker.js', { scope: './' });
}
</script>


</body>
</html>
